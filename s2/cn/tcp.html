<!DOCTYPE html> <html lang="en"><head>
<title>TCP</title>
<base href="..">
<meta name="pathname" content="cn/tcp.html">
<meta name="description" content="complete - TCP">
<meta property="og:title" content="TCP">
<meta property="og:description" content="complete - TCP">
<meta property="og:type" content="website">
<meta property="og:url" content="cn/tcp.html">
<meta property="og:image" content="cn/img/11.png">
<meta charset="UTF-8"><meta property="og:site_name" content="complete"><meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes, minimum-scale=1.0, maximum-scale=5.0"><link rel="alternate" type="application/rss+xml" title="RSS Feed" href="site-lib/rss.xml"><script async="" id="webpage-script" src="site-lib/scripts/webpage.js" onload="this.onload=null;this.setAttribute(&quot;loaded&quot;, &quot;true&quot;)"></script><script async="" id="graph-wasm-script" src="site-lib/scripts/graph-wasm.js" onload="this.onload=null;this.setAttribute(&quot;loaded&quot;, &quot;true&quot;)"></script><script async="" id="graph-render-worker-script" src="site-lib/scripts/graph-render-worker.js" onload="this.onload=null;this.setAttribute(&quot;loaded&quot;, &quot;true&quot;)"></script><link rel="icon" href="site-lib/media/favicon.png"><link rel="stylesheet" href="site-lib/styles/obsidian.css"><link rel="preload" href="site-lib/styles/global-variable-styles.css" as="style" onload="this.onload=null;this.rel='stylesheet'"><noscript><link rel="stylesheet" href="site-lib/styles/global-variable-styles.css"></noscript><link rel="preload" href="site-lib/styles/main-styles.css" as="style" onload="this.onload=null;this.rel='stylesheet'"><noscript><link rel="stylesheet" href="site-lib/styles/main-styles.css"></noscript><style>body{--line-width:40em;--line-width-adaptive:40em;--file-line-width:40em;--sidebar-width:min(20em, 80vw);--collapse-arrow-size:11px;--tree-vertical-spacing:1.3em;--sidebar-margin:12px}:root{background-color:#202124}.sidebar{height:100%;font-size:14px;z-index:10;min-width:calc(var(--sidebar-width) + var(--divider-width-hover));max-width:calc(var(--sidebar-width) + var(--divider-width-hover));position:relative;overflow:hidden;overflow:clip;transition:min-width ease-in-out,max-width ease-in-out;transition-duration:.2s;contain:size}#left-sidebar{left:0}#right-sidebar{right:0}.sidebar.is-collapsed{min-width:0;max-width:0}.sidebar.floating{position:absolute}.sidebar .leaf-content{height:100%;min-width:calc(var(--sidebar-width) - var(--divider-width-hover));top:0;padding:var(--sidebar-margin);padding-top:4em;line-height:var(--line-height-tight);background-color:var(--background-secondary);transition:background-color,border-right,border-left,box-shadow;transition-duration:var(--color-fade-speed);transition-timing-function:ease-in-out;position:absolute;display:flex;flex-direction:column}.sidebar:not(.is-collapsed) .leaf-content{min-width:calc(max(100%,var(--sidebar-width)) - 3px);max-width:calc(max(100%,var(--sidebar-width)) - 3px)}#left-sidebar-content{left:0;border-top-right-radius:var(--radius-l);border-bottom-right-radius:var(--radius-l)}#right-sidebar-content{right:0;border-top-left-radius:var(--radius-l);border-bottom-left-radius:var(--radius-l)}.sidebar #left-sidebar-content,.sidebar #right-sidebar-content{contain:none!important;container-type:normal!important;animation:none!important}.sidebar:has(.leaf-content:empty):has(.topbar-content:empty){display:none}.sidebar-topbar{height:calc(2.3em + 2 * var(--sidebar-margin));width:var(--sidebar-width);padding:var(--sidebar-margin);z-index:1;position:fixed;display:flex;align-items:center;transition:width ease-in-out;transition-duration:inherit}.sidebar.is-collapsed .sidebar-topbar{width:calc(2.3em + var(--sidebar-margin) * 2)}.sidebar .sidebar-topbar.is-collapsed{width:0}#left-sidebar .sidebar-topbar{left:0;flex-direction:row;border-top-right-radius:var(--radius-l)}#right-sidebar .sidebar-topbar{right:0;flex-direction:row-reverse;border-top-left-radius:var(--radius-l)}#left-sidebar .topbar-content{margin-right:calc(2.3em + var(--sidebar-margin));flex-direction:row}#right-sidebar .topbar-content{margin-left:calc(2.3em + var(--sidebar-margin));flex-direction:row-reverse}.topbar-content{overflow:hidden visible;overflow:clip visible;width:100%;height:100%;display:flex;align-items:center;transition:inherit}.sidebar.is-collapsed .topbar-content{width:0;transition:inherit}.clickable-icon.sidebar-collapse-icon{background-color:transparent;color:var(--icon-color-focused);padding:2px!important;margin:0!important;height:100%!important;width:2.3em!important;margin-inline:0.14em!important;position:absolute}#left-sidebar .clickable-icon.sidebar-collapse-icon{transform:rotateY(180deg);right:var(--sidebar-margin)}#right-sidebar .clickable-icon.sidebar-collapse-icon{transform:rotateY(180deg);left:var(--sidebar-margin)}.clickable-icon.sidebar-collapse-icon svg.svg-icon{width:100%;height:100%}.feature-title{margin-left:1px;text-transform:uppercase;letter-spacing:.06em;margin-top:.75em;margin-bottom:.75em}.feature-header{display:flex;align-items:center;padding-top:0;font-size:1em;padding-left:0}body.floating-sidebars .sidebar{position:absolute}body{transition:background-color var(--color-fade-speed) ease-in-out}#navbar:not(:empty){display:flex;align-items:center;justify-content:space-between;padding:.5em 1em;width:100%}#main{display:flex;flex-direction:column;height:100%;width:100%;align-items:stretch;justify-content:center}#main-horizontal{display:flex;flex-direction:row;flex-grow:1;width:100%;align-items:stretch;justify-content:center}#center-content{flex-basis:100%;max-width:100%;width:100%;height:100%;display:flex;flex-direction:column;align-items:center;transition:opacity .2s ease-in-out;contain:inline-size}.hide{opacity:0!important;transition:opacity .2s ease-in-out;pointer-events:none}#center-content>.obsidian-document{padding-left:2em;padding-right:1em;margin-bottom:0;width:100%;width:-webkit-fill-available;width:-moz-available;width:fill-available;transition:background-color var(--color-fade-speed) ease-in-out;border-top-right-radius:var(--window-radius,var(--radius-m));border-top-left-radius:var(--window-radius,var(--radius-m));overflow-x:hidden!important;overflow-y:auto!important;display:flex!important;flex-direction:column!important;align-items:center!important;contain:inline-size}body #center-content>.obsidian-document>.markdown-preview-sizer{padding-bottom:80vh;width:100%;max-width:var(--line-width);flex-basis:var(--line-width);transition:background-color var(--color-fade-speed) ease-in-out;contain:inline-size}#center-content>.obsidian-document>div{width:100%!important;transition:background-color var(--color-fade-speed) ease-in-out;contain:inline-size}#center-content>.obsidian-document:not([data-type=markdown]).embed{display:flex;padding:1em;height:100%;width:100%;align-items:center;justify-content:center}#center-content>.obsidian-document:not([data-type=markdown]).embed>*{max-width:100%;max-height:100%;object-fit:contain}:not(h1,h2,h3,h4,h5,h6,li):has(> :is(.math,table)){overflow-x:auto!important}#center-content>.obsidian-document:not([data-type=markdown]){overflow-x:auto;contain:content;padding:0;margin:0;height:100%}.obsidian-document[data-type=attachment]{display:flex;flex-direction:column;align-items:center;justify-content:center;height:100%;width:100%}.obsidian-document[data-type=attachment]>*{outline:0;border:none;box-shadow:none}.obsidian-document[data-type=attachment] :is(img){max-width:90%;max-height:90%;object-fit:contain}.obsidian-document[data-type=attachment]>:is(audio){width:100%;max-width:min(90%,var(--line-width))}.obsidian-document[data-type=attachment]>:is(embed,iframe,video){width:100%;height:100%;max-width:100%;max-height:100%;object-fit:contain}.canvas-wrapper>:is(.header,.footer){z-index:100;position:absolute;display:flex;justify-content:center;flex-direction:column;width:100%;align-items:center}.scroll-highlight{position:absolute;width:100%;height:100%;pointer-events:none;z-index:1000;background-color:hsla(var(--color-accent-hsl),.25);opacity:0;padding:1em;inset:50%;translate:-50% -50%;border-radius:var(--radius-s)}</style><script defer="">async function loadIncludes(){let e=document.querySelectorAll("link[itemprop='include']");for(const t of e){let e=t.getAttribute("href");try{let o="";if(e.startsWith("https:")||e.startsWith("http:")||"file:"!=window.location.protocol){const n=await fetch(e);if(!n.ok){console.log("Could not include file: "+e),t?.remove();continue}o=await n.text()}else{const t=document.getElementById(btoa(encodeURI(e)));if(t){const e=JSON.parse(decodeURI(atob(t.getAttribute("value")??"")));o=e?.data??""}}let n=document.createRange().createContextualFragment(o);t.before(n),t.remove(),console.log("Included text: "+o),console.log("Included file: "+e)}catch(o){t?.remove(),console.log("Could not include file: "+e,o);continue}}}document.addEventListener("DOMContentLoaded",(()=>{loadIncludes()}));let isFileProtocol="file:"==location.protocol;function waitLoadScripts(e,t){let o=e.map((e=>document.getElementById(e+"-script")));!function e(n){let l=o[n],c=n+1;l?(l&&"true"!=l.getAttribute("loaded")||n<o.length&&e(c),n<o.length&&l.addEventListener("load",(()=>e(c)))):n<o.length?e(c):t()}(0)}</script></head><body class="publish css-settings-manager show-inline-title show-ribbon"><script defer="">let theme=localStorage.getItem("theme")||(window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light");"dark"==theme?(document.body.classList.add("theme-dark"),document.body.classList.remove("theme-light")):(document.body.classList.add("theme-light"),document.body.classList.remove("theme-dark")),window.innerWidth<480?document.body.classList.add("is-phone"):window.innerWidth<768?document.body.classList.add("is-tablet"):window.innerWidth<1024?document.body.classList.add("is-small-screen"):document.body.classList.add("is-large-screen")</script><div class="parsed-feature-container" style="display: contents;"><link itemprop="include" href="site-lib/html/custom-head-content-content.html"></div><div id="main"><div id="navbar"></div><div id="main-horizontal"><div id="left-content" class="leaf" style="--sidebar-width: var(--sidebar-width-left);"><div id="left-sidebar" class="sidebar"><div class="sidebar-handle"></div><div class="sidebar-topbar"><div class="topbar-content"><div id="search-container"><div id="search-wrapper"><input enterkeyhint="search" type="search" spellcheck="false" placeholder="Search..."><div aria-label="Clear search" id="search-clear-button"></div></div></div></div><div class="clickable-icon sidebar-collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="100%" height="100%" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3" stroke-linecap="round" stroke-linejoin="round" class="svg-icon"><path d="M21 3H3C1.89543 3 1 3.89543 1 5V19C1 20.1046 1.89543 21 3 21H21C22.1046 21 23 20.1046 23 19V5C23 3.89543 22.1046 3 21 3Z"></path><path d="M10 4V20"></path><path d="M4 7H7"></path><path d="M4 10H7"></path><path d="M4 13H7"></path></svg></div></div><div class="sidebar-content-wrapper"><div id="left-sidebar-content" class="leaf-content"><link itemprop="include" href="site-lib/html/file-tree-content.html"></div></div><script defer="">let ls = document.querySelector("#left-sidebar"); ls.classList.toggle("is-collapsed", window.innerWidth < 768); ls.style.setProperty("--sidebar-width", localStorage.getItem("sidebar-left-width"));</script></div></div><div id="center-content" class="leaf"><div class="obsidian-document markdown-preview-view markdown-rendered node-insert-event is-readable-line-width allow-fold-headings allow-fold-lists show-indentation-guide show-properties" data-type="markdown"><style id="MJX-CHTML-styles">mjx-c.mjx-c1D445.TEX-I::before{padding:.683em .759em .021em 0;content:"R"}mjx-c.mjx-c1D43C.TEX-I::before{padding:.683em .504em 0 0;content:"I"}mjx-c.mjx-c210E.TEX-I::before{padding:.694em .576em .011em 0;content:"h"}mjx-c.mjx-c1D463.TEX-I::before{padding:.443em .485em .011em 0;content:"v"}mjx-c.mjx-c1D464.TEX-I::before{padding:.443em .716em .011em 0;content:"w"}mjx-c.mjx-c1D45C.TEX-I::before{padding:.441em .485em .011em 0;content:"o"}mjx-c.mjx-c1D43B.TEX-I::before{padding:.683em .888em 0 0;content:"H"}mjx-c.mjx-c1D459.TEX-I::before{padding:.694em .298em .011em 0;content:"l"}mjx-c.mjx-c2217::before{padding:.465em .5em 0 0;content:"∗"}mjx-c.mjx-c1D453.TEX-I::before{padding:.705em .55em .205em 0;content:"f"}mjx-c.mjx-c1D438.TEX-I::before{padding:.68em .764em 0 0;content:"E"}mjx-c.mjx-c4E::before{padding:.683em .75em 0 0;content:"N"}mjx-c.mjx-c66::before{padding:.705em .372em 0 0;content:"f"}mjx-c.mjx-c6C::before{padding:.694em .278em 0 0;content:"l"}mjx-c.mjx-c24::before{padding:.75em .5em .056em 0;content:"$"}mjx-c.mjx-c25::before{padding:.75em .833em .056em 0;content:"%"}mjx-c.mjx-c1D43A.TEX-I::before{padding:.705em .786em .022em 0;content:"G"}mjx-c.mjx-c78::before{padding:.431em .528em 0 0;content:"x"}mjx-c.mjx-c2192::before{padding:.511em 1em .011em 0;content:"→"}mjx-mtext{display:inline-block;text-align:left}mjx-mspace{display:inline-block;text-align:left}mjx-c.mjx-c1D446.TEX-I::before{padding:.705em .645em .022em 0;content:"S"}mjx-c.mjx-c1D45D.TEX-I::before{padding:.442em .503em .194em 0;content:"p"}mjx-c.mjx-c44::before{padding:.683em .764em 0 0;content:"D"}mjx-c.mjx-c69::before{padding:.669em .278em 0 0;content:"i"}mjx-c.mjx-c73::before{padding:.448em .394em .011em 0;content:"s"}mjx-c.mjx-c74::before{padding:.615em .389em .01em 0;content:"t"}mjx-c.mjx-c61::before{padding:.448em .5em .011em 0;content:"a"}mjx-c.mjx-c6E::before{padding:.442em .556em 0 0;content:"n"}mjx-c.mjx-c63::before{padding:.448em .444em .011em 0;content:"c"}mjx-c.mjx-c65::before{padding:.448em .444em .011em 0;content:"e"}mjx-c.mjx-c54::before{padding:.677em .722em 0 0;content:"T"}mjx-c.mjx-c6D::before{padding:.442em .833em 0 0;content:"m"}mjx-c.mjx-c6B::before{padding:.694em .528em 0 0;content:"k"}mjx-c.mjx-c68::before{padding:.694em .556em 0 0;content:"h"}mjx-c.mjx-c72::before{padding:.442em .392em 0 0;content:"r"}mjx-c.mjx-c1D434.TEX-I::before{padding:.716em .75em 0 0;content:"A"}mjx-c.mjx-c3A::before{padding:.43em .278em 0 0;content:":"}mjx-c.mjx-c1D435.TEX-I::before{padding:.683em .759em 0 0;content:"B"}mjx-c.mjx-cA0::before{padding:0 .25em 0 0;content:" "}mjx-c.mjx-c75::before{padding:.442em .556em .011em 0;content:"u"}mjx-c.mjx-c6F::before{padding:.448em .5em .01em 0;content:"o"}mjx-c.mjx-c1D437.TEX-I::before{padding:.683em .828em 0 0;content:"D"}mjx-c.mjx-c1D456.TEX-I::before{padding:.661em .345em .011em 0;content:"i"}mjx-c.mjx-c1D460.TEX-I::before{padding:.442em .469em .01em 0;content:"s"}mjx-c.mjx-c1D461.TEX-I::before{padding:.626em .361em .011em 0;content:"t"}mjx-c.mjx-c1D447.TEX-I::before{padding:.677em .704em 0 0;content:"T"}mjx-c.mjx-c22C5::before{padding:.31em .278em 0 0;content:"⋅"}mjx-c.mjx-c221D::before{padding:.442em .778em .011em 0;content:"∝"}mjx-c.mjx-c1D43F.TEX-I::before{padding:.683em .681em 0 0;content:"L"}mjx-c.mjx-c1D442.TEX-I::before{padding:.704em .763em .022em 0;content:"O"}mjx-c.mjx-c3E::before{padding:.54em .778em .04em 0;content:">"}mjx-c.mjx-cD7::before{padding:.491em .778em 0 0;content:"×"}mjx-c.mjx-c1D466.TEX-I::before{padding:.442em .49em .205em 0;content:"y"}mjx-c.mjx-c1D448.TEX-I::before{padding:.683em .767em .022em 0;content:"U"}mjx-c.mjx-c70::before{padding:.442em .556em .194em 0;content:"p"}mjx-c.mjx-c53::before{padding:.705em .556em .022em 0;content:"S"}mjx-c.mjx-c64::before{padding:.694em .556em .011em 0;content:"d"}mjx-c.mjx-c20::before{padding:0 .25em 0 0;content:" "}mjx-c.mjx-c77::before{padding:.431em .722em .011em 0;content:"w"}mjx-c.mjx-c55::before{padding:.683em .75em .022em 0;content:"U"}mjx-c.mjx-c27F9::before{padding:.525em 1.638em .024em 0;content:"⟹"}mjx-c.mjx-c41::before{padding:.716em .75em 0 0;content:"A"}mjx-c.mjx-c76::before{padding:.431em .528em .011em 0;content:"v"}mjx-c.mjx-c67::before{padding:.453em .5em .206em 0;content:"g"}mjx-c.mjx-c62::before{padding:.694em .556em .011em 0;content:"b"}mjx-c.mjx-c1D70B.TEX-I::before{padding:.431em .57em .011em 0;content:"π"}mjx-c.mjx-c1D465.TEX-I::before{padding:.442em .572em .011em 0;content:"x"}mjx-c.mjx-c1D462.TEX-I::before{padding:.442em .572em .011em 0;content:"u"}mjx-c.mjx-c1D45A.TEX-I::before{padding:.442em .878em .011em 0;content:"m"}mjx-c.mjx-c1D44F.TEX-I::before{padding:.694em .429em .011em 0;content:"b"}mjx-c.mjx-c1D452.TEX-I::before{padding:.442em .466em .011em 0;content:"e"}mjx-c.mjx-c1D45F.TEX-I::before{padding:.442em .451em .011em 0;content:"r"}mjx-c.mjx-cF7::before{padding:.537em .778em .036em 0;content:"÷"}mjx-c.mjx-c2248::before{padding:.483em .778em 0 0;content:"≈"}mjx-c.mjx-c1D44E.TEX-I::before{padding:.441em .529em .01em 0;content:"a"}mjx-c.mjx-c1D450.TEX-I::before{padding:.442em .433em .011em 0;content:"c"}mjx-c.mjx-c1D451.TEX-I::before{padding:.694em .52em .01em 0;content:"d"}mjx-c.mjx-c3F::before{padding:.705em .472em 0 0;content:"?"}mjx-c.mjx-c2F::before{padding:.75em .5em .25em 0;content:"/"}mjx-c.mjx-c35::before{padding:.666em .5em .022em 0;content:"5"}mjx-c.mjx-c34::before{padding:.677em .5em 0 0;content:"4"}mjx-c.mjx-c2E::before{padding:.12em .278em 0 0;content:"."}mjx-c.mjx-c37::before{padding:.676em .5em .022em 0;content:"7"}mjx-c.mjx-c39::before{padding:.666em .5em .022em 0;content:"9"}mjx-container[jax=CHTML]{line-height:0}mjx-container [space="1"]{margin-left:.111em}mjx-container [space="2"]{margin-left:.167em}mjx-container [space="3"]{margin-left:.222em}mjx-container [space="4"]{margin-left:.278em}mjx-container [space="5"]{margin-left:.333em}mjx-container [rspace="1"]{margin-right:.111em}mjx-container [rspace="2"]{margin-right:.167em}mjx-container [rspace="3"]{margin-right:.222em}mjx-container [rspace="4"]{margin-right:.278em}mjx-container [rspace="5"]{margin-right:.333em}mjx-container [size="s"]{font-size:70.7%}mjx-container [size=ss]{font-size:50%}mjx-container [size=Tn]{font-size:60%}mjx-container [size=sm]{font-size:85%}mjx-container [size=lg]{font-size:120%}mjx-container [size=Lg]{font-size:144%}mjx-container [size=LG]{font-size:173%}mjx-container [size=hg]{font-size:207%}mjx-container [size=HG]{font-size:249%}mjx-container [width=full]{width:100%}mjx-box{display:inline-block}mjx-block{display:block}mjx-itable{display:inline-table}mjx-row{display:table-row}mjx-row>*{display:table-cell}mjx-mtext{display:inline-block}mjx-mstyle{display:inline-block}mjx-merror{display:inline-block;color:red;background-color:#ff0}mjx-mphantom{visibility:hidden}mjx-assistive-mml{top:0;left:0;clip:rect(1px,1px,1px,1px);user-select:none;position:absolute!important;padding:1px 0 0!important;border:0!important;display:block!important;width:auto!important;overflow:hidden!important}mjx-assistive-mml[display=block]{width:100%!important}mjx-math{display:inline-block;text-align:left;line-height:0;text-indent:0;font-style:normal;font-weight:400;font-size:100%;font-size-adjust:none;letter-spacing:normal;border-collapse:collapse;overflow-wrap:normal;word-spacing:normal;white-space:nowrap;direction:ltr;padding:1px 0}mjx-container[jax=CHTML][display=true]{display:block;text-align:center;margin:1em 0}mjx-container[jax=CHTML][display=true][width=full]{display:flex}mjx-container[jax=CHTML][display=true] mjx-math{padding:0}mjx-container[jax=CHTML][justify=left]{text-align:left}mjx-container[jax=CHTML][justify=right]{text-align:right}mjx-mn{display:inline-block;text-align:left}mjx-c{display:inline-block}mjx-utext{display:inline-block;padding:.75em 0 .2em}mjx-mo{display:inline-block;text-align:left}mjx-stretchy-h{display:inline-table;width:100%}mjx-stretchy-h>*{display:table-cell;width:0}mjx-stretchy-h>*>mjx-c{display:inline-block;transform:scaleX(1)}mjx-stretchy-h>*>mjx-c::before{display:inline-block;width:initial}mjx-stretchy-h>mjx-ext{overflow:clip visible;width:100%}mjx-stretchy-h>mjx-ext>mjx-c::before{transform:scaleX(500)}mjx-stretchy-h>mjx-ext>mjx-c{width:0}mjx-stretchy-h>mjx-beg>mjx-c{margin-right:-.1em}mjx-stretchy-h>mjx-end>mjx-c{margin-left:-.1em}mjx-stretchy-v{display:inline-block}mjx-stretchy-v>*{display:block}mjx-stretchy-v>mjx-beg{height:0}mjx-stretchy-v>mjx-end>mjx-c{display:block}mjx-stretchy-v>*>mjx-c{transform:scaleY(1);transform-origin:left center;overflow:hidden}mjx-stretchy-v>mjx-ext{display:block;height:100%;box-sizing:border-box;border:0 solid transparent;overflow:visible clip}mjx-stretchy-v>mjx-ext>mjx-c::before{width:initial;box-sizing:border-box}mjx-stretchy-v>mjx-ext>mjx-c{transform:scaleY(500) translateY(.075em);overflow:visible}mjx-mark{display:inline-block;height:0}mjx-mi{display:inline-block;text-align:left}mjx-mfrac{display:inline-block;text-align:left}mjx-frac{display:inline-block;vertical-align:.17em;padding:0 .22em}mjx-frac[type="d"]{vertical-align:.04em}mjx-frac[delims]{padding:0 .1em}mjx-frac[atop]{padding:0 .12em}mjx-frac[atop][delims]{padding:0}mjx-dtable{display:inline-table;width:100%}mjx-dtable>*{font-size:2000%}mjx-dbox{display:block;font-size:5%}mjx-num{display:block;text-align:center}mjx-den{display:block;text-align:center}mjx-mfrac[bevelled]>mjx-num{display:inline-block}mjx-mfrac[bevelled]>mjx-den{display:inline-block}mjx-den[align=right],mjx-num[align=right]{text-align:right}mjx-den[align=left],mjx-num[align=left]{text-align:left}mjx-nstrut{display:inline-block;height:.054em;width:0;vertical-align:-.054em}mjx-nstrut[type="d"]{height:.217em;vertical-align:-.217em}mjx-dstrut{display:inline-block;height:.505em;width:0}mjx-dstrut[type="d"]{height:.726em}mjx-line{display:block;box-sizing:border-box;min-height:1px;height:.06em;border-top:.06em solid;margin:.06em -.1em;overflow:hidden}mjx-line[type="d"]{margin:.18em -.1em}mjx-mrow{display:inline-block;text-align:left}mjx-msup{display:inline-block;text-align:left}mjx-msub{display:inline-block;text-align:left}mjx-msubsup{display:inline-block;text-align:left}mjx-script{display:inline-block;padding-right:.05em;padding-left:.033em}mjx-script>mjx-spacer{display:block}mjx-texatom{display:inline-block;text-align:left}mjx-c::before{display:block;width:0}.MJX-TEX{font-family:MJXZERO,MJXTEX}.TEX-B{font-family:MJXZERO,MJXTEX-B}.TEX-I{font-family:MJXZERO,MJXTEX-I}.TEX-MI{font-family:MJXZERO,MJXTEX-MI}.TEX-BI{font-family:MJXZERO,MJXTEX-BI}.TEX-S1{font-family:MJXZERO,MJXTEX-S1}.TEX-S2{font-family:MJXZERO,MJXTEX-S2}.TEX-S3{font-family:MJXZERO,MJXTEX-S3}.TEX-S4{font-family:MJXZERO,MJXTEX-S4}.TEX-A{font-family:MJXZERO,MJXTEX-A}.TEX-C{font-family:MJXZERO,MJXTEX-C}.TEX-CB{font-family:MJXZERO,MJXTEX-CB}.TEX-FR{font-family:MJXZERO,MJXTEX-FR}.TEX-FRB{font-family:MJXZERO,MJXTEX-FRB}.TEX-SS{font-family:MJXZERO,MJXTEX-SS}.TEX-SSB{font-family:MJXZERO,MJXTEX-SSB}.TEX-SSI{font-family:MJXZERO,MJXTEX-SSI}.TEX-SC{font-family:MJXZERO,MJXTEX-SC}.TEX-T{font-family:MJXZERO,MJXTEX-T}.TEX-V{font-family:MJXZERO,MJXTEX-V}.TEX-VB{font-family:MJXZERO,MJXTEX-VB}mjx-stretchy-h mjx-c,mjx-stretchy-v mjx-c{font-family:MJXZERO,MJXTEX-S1,MJXTEX-S4,MJXTEX,MJXTEX-A!important}@font-face{font-family:MJXZERO;src:url("site-lib/fonts/mathjax_zero.woff") format("woff")}@font-face{font-family:MJXTEX;src:url("site-lib/fonts/mathjax_main-regular.woff") format("woff")}@font-face{font-family:MJXTEX-B;src:url("site-lib/fonts/mathjax_main-bold.woff") format("woff")}@font-face{font-family:MJXTEX-I;src:url("site-lib/fonts/mathjax_math-italic.woff") format("woff")}@font-face{font-family:MJXTEX-MI;src:url("site-lib/fonts/mathjax_main-italic.woff") format("woff")}@font-face{font-family:MJXTEX-BI;src:url("site-lib/fonts/mathjax_math-bolditalic.woff") format("woff")}@font-face{font-family:MJXTEX-S1;src:url("site-lib/fonts/mathjax_size1-regular.woff") format("woff")}@font-face{font-family:MJXTEX-S2;src:url("site-lib/fonts/mathjax_size2-regular.woff") format("woff")}@font-face{font-family:MJXTEX-S3;src:url("site-lib/fonts/mathjax_size3-regular.woff") format("woff")}@font-face{font-family:MJXTEX-S4;src:url("site-lib/fonts/mathjax_size4-regular.woff") format("woff")}@font-face{font-family:MJXTEX-A;src:url("site-lib/fonts/mathjax_ams-regular.woff") format("woff")}@font-face{font-family:MJXTEX-C;src:url("site-lib/fonts/mathjax_calligraphic-regular.woff") format("woff")}@font-face{font-family:MJXTEX-CB;src:url("site-lib/fonts/mathjax_calligraphic-bold.woff") format("woff")}@font-face{font-family:MJXTEX-FR;src:url("site-lib/fonts/mathjax_fraktur-regular.woff") format("woff")}@font-face{font-family:MJXTEX-FRB;src:url("site-lib/fonts/mathjax_fraktur-bold.woff") format("woff")}@font-face{font-family:MJXTEX-SS;src:url("site-lib/fonts/mathjax_sansserif-regular.woff") format("woff")}@font-face{font-family:MJXTEX-SSB;src:url("site-lib/fonts/mathjax_sansserif-bold.woff") format("woff")}@font-face{font-family:MJXTEX-SSI;src:url("site-lib/fonts/mathjax_sansserif-italic.woff") format("woff")}@font-face{font-family:MJXTEX-SC;src:url("site-lib/fonts/mathjax_script-regular.woff") format("woff")}@font-face{font-family:MJXTEX-T;src:url("site-lib/fonts/mathjax_typewriter-regular.woff") format("woff")}@font-face{font-family:MJXTEX-V;src:url("site-lib/fonts/mathjax_vector-regular.woff") format("woff")}@font-face{font-family:MJXTEX-VB;src:url("site-lib/fonts/mathjax_vector-bold.woff") format("woff")}mjx-c.mjx-c33::before{padding:.665em .5em .022em 0;content:"3"}mjx-c.mjx-c32::before{padding:.666em .5em 0 0;content:"2"}mjx-c.mjx-cD7::before{padding:.491em .778em 0 0;content:"×"}mjx-c.mjx-c3D::before{padding:.583em .778em .082em 0;content:"="}mjx-c.mjx-c36::before{padding:.666em .5em .022em 0;content:"6"}mjx-c.mjx-c31::before{padding:.666em .5em 0 0;content:"1"}mjx-c.mjx-c2B::before{padding:.583em .778em .082em 0;content:"+"}mjx-c.mjx-c38::before{padding:.666em .5em .022em 0;content:"8"}mjx-c.mjx-c1D436.TEX-I::before{padding:.705em .76em .022em 0;content:"C"}mjx-c.mjx-c28::before{padding:.75em .389em .25em 0;content:"("}mjx-c.mjx-c1D45B.TEX-I::before{padding:.442em .6em .011em 0;content:"n"}mjx-c.mjx-c2C::before{padding:.121em .278em .194em 0;content:","}mjx-c.mjx-c1D458.TEX-I::before{padding:.694em .521em .011em 0;content:"k"}mjx-c.mjx-c29::before{padding:.75em .389em .25em 0;content:")"}mjx-c.mjx-c21::before{padding:.716em .278em 0 0;content:"!"}mjx-c.mjx-c2212::before{padding:.583em .778em .082em 0;content:"−"}mjx-c.mjx-c30::before{padding:.666em .5em .022em 0;content:"0"}mjx-c.mjx-c1D443.TEX-I::before{padding:.683em .751em 0 0;content:"P"}</style><div class="markdown-preview-sizer markdown-preview-section"><div class="header"><h1 class="page-title heading inline-title" id="TCP_0">TCP</h1><div class="data-bar"></div></div><div class="markdown-preview-pusher" style="width: 1px; height: 0.1px; margin-bottom: 0px;"></div><div class="el-h1"><h1 data-heading="TCP ( Transmission Control Protocol )" dir="auto" class="heading" id="TCP_(_Transmission_Control_Protocol_)_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>TCP ( Transmission Control Protocol )</h1></div><div class="el-blockquote"><blockquote dir="auto">
<p>TCP operates at the transport layer (Layer 4) and provides a reliable, ordered, and error-checked communication service between applications running on different hosts connected via an IP network</p>
</blockquote></div><div class="el-ul"><ul class="has-list-bullet">
<li data-line="0" dir="auto"><span class="list-bullet"></span>Like UDP, TCP uses port numbers as transport layer Address.</li>
<li data-line="1" dir="auto"><span class="list-bullet"></span>If an application can use both UDP and TCP, the same port number is assigned to this application.</li>
<li data-line="2" dir="auto"><span class="list-bullet"></span>TCP is described as a stream-oriented protocol, it means that it treats the data being sent between two applications as a continuous, ordered sequence of bytes (or octets), rather than as a series of distinct messages or packets.</li>
<li data-line="3" dir="auto"><span class="list-bullet"></span>TCP creates an environment in which the two processes seem to be connected by an imaginary “tube” that carries their data across the Internet.</li>
</ul></div><div class="el-p"><p dir="auto"><span src="cn/img/11.png" class="internal-embed media-embed image-embed is-loaded" target="_self"><img src="cn/img/11.png" target="_self"></span></p></div><div class="el-h2"><h2 data-heading="TCP Buffers" dir="auto" class="heading" id="TCP_Buffers_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>TCP Buffers</h2></div><div class="el-ul"><ul class="has-list-bullet">
<li data-line="0" dir="auto"><span class="list-bullet"></span>Buffers are needed for storage, because the sending and receiving processes may not produce and consume data at the same speed.</li>
<li data-line="1" dir="auto"><span class="list-bullet"></span>There are to buffers, one for each direction</li>
<li data-line="2" dir="auto"><span class="list-bullet"></span>One way to implement a buffer is to use a circular array of 1-Byte locations, as shown</li>
<li data-line="3" dir="auto"><span class="list-bullet"></span>Normally the buffers are hundreds or thousands of Bytes, depending on the implementation.</li>
</ul></div><div class="el-p"><p dir="auto"><span src="cn/img/12.png" class="internal-embed media-embed image-embed is-loaded" target="_self"><img src="cn/img/12.png" target="_self"></span></p></div><div class="el-h3"><h3 data-heading="Sender Side Buffer:" dir="auto" class="heading" id="Sender_Side_Buffer_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>Sender Side Buffer:</h3></div><div class="el-ul"><ul class="has-list-bullet">
<li data-line="0" dir="auto"><span class="list-bullet"></span>At sending side, the buffer has three types of locations:</li>
<li data-line="1" dir="auto"><span class="list-bullet"></span>The white section contains empty locations that can be filled by the sending process (producer).</li>
<li data-line="2" dir="auto"><span class="list-bullet"></span>The grey area holds Bytes that have been sent but not yet acknowledged. (TCP keeps the Bytes in the buffer until it receives an acknowledgement).</li>
<li data-line="3" dir="auto"><span class="list-bullet"></span>The colored area are Bytes to be send by sending TCP.</li>
<li data-line="4" dir="auto"><span class="list-bullet"></span>However, TCP may be able to send only part of this colored section, due to the slowness of the receiving process or congestion in the network.</li>
<li data-line="5" dir="auto"><span class="list-bullet"></span>The circular shape is due to the fact that after Bytes in the grey locations are acknowledged, the location is recycled and available for use by sending process.</li>
</ul></div><div class="el-h3"><h3 data-heading="Receiver Side Buffer:" dir="auto" class="heading" id="Receiver_Side_Buffer_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>Receiver Side Buffer:</h3></div><div class="el-ul"><ul class="has-list-bullet">
<li data-line="0" dir="auto"><span class="list-bullet"></span>The operation of the buffer at the receiver site is simpler.</li>
<li data-line="1" dir="auto"><span class="list-bullet"></span>The circular buffer is divided into two areas (white and colored).</li>
<li data-line="2" dir="auto"><span class="list-bullet"></span>The white area contains empty locations to be filled by Bytes received from the network.</li>
<li data-line="3" dir="auto"><span class="list-bullet"></span>The colored sections contain received Bytes that can be consumed by receiving process.</li>
<li data-line="4" dir="auto"><span class="list-bullet"></span>When a Byte is consumed by the receiving process, the location is recycled and added to the pool of empty locations.</li>
</ul></div><div class="el-h2"><h2 data-heading="TCP Segmentation and Services" dir="auto" class="heading" id="TCP_Segmentation_and_Services_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>TCP Segmentation and Services</h2></div><div class="el-p"><p dir="auto">TCP (Transmission Control Protocol) implements several key mechanisms to provide reliable data transmission over an unreliable IP network. The process of converting a continuous byte stream into discrete segments is fundamental to TCP's operation.</p></div><div class="el-h3"><h3 data-heading="Bytes and Segments" dir="auto" class="heading" id="Bytes_and_Segments_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>Bytes and Segments</h3></div><div class="el-p"><p dir="auto">TCP operates on a stream-oriented model where applications send data as a continuous stream of bytes. However, the underlying IP layer requires data to be packaged into discrete packets. To bridge this gap, TCP groups bytes together into units called <strong>segments</strong>.</p></div><div class="el-p"><p dir="auto"><span alt="TCPsegmentflow.png" src="cn/img/tcpsegmentflow.png" class="internal-embed media-embed image-embed is-loaded" target="_self"><img alt="TCPsegmentflow.png" src="cn/img/tcpsegmentflow.png" target="_self"></span></p></div><div class="el-p"><p dir="auto">The segmentation process works as follows:</p></div><div class="el-ul"><ul class="has-list-bullet">
<li data-line="0" dir="auto"><span class="list-bullet"></span>TCP accepts data from the application as a stream of bytes.</li>
<li data-line="1" dir="auto"><span class="list-bullet"></span>It divides this data into chunks and adds a TCP header to create TCP segments.</li>
<li data-line="2" dir="auto"><span class="list-bullet"></span>Each segment is then encapsulated into an IP datagram for transmission.</li>
<li data-line="3" dir="auto"><span class="list-bullet"></span>Segments are not necessarily the same size and can carry hundreds of bytes.</li>
</ul></div><div class="el-p"><p dir="auto">The TCP implementation collects bytes from the bytestream one by one and places them into a TCP segment. When the segment reaches a fixed maximum segment size (MSS), it is sent, and a new segment is started. If data is ready to send but doesn't fill a complete segment, a timer ensures the segment is sent even if not full.</p></div><div class="el-h3"><h3 data-heading="Buffering and Flow Control" dir="auto" class="heading" id="Buffering_and_Flow_Control_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>Buffering and Flow Control</h3></div><div class="el-p"><p dir="auto">Since sending and receiving processes cannot produce and consume data at the same speed, TCP uses buffers for storage. Each TCP connection maintains:</p></div><div class="el-ul"><ul class="has-list-bullet">
<li data-line="0" dir="auto"><span class="list-bullet"></span><strong>Sending buffer</strong>: Contains bytes waiting to be sent, bytes sent but not yet acknowledged, and empty locations.</li>
<li data-line="1" dir="auto"><span class="list-bullet"></span><strong>Receiving buffer</strong>: Contains received bytes waiting for the application to consume them and empty locations.</li>
</ul></div><div class="el-h2"><h2 data-heading="Full-Duplex Service" dir="auto" class="heading" id="Full-Duplex_Service_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>Full-Duplex Service</h2></div><div class="el-p"><p dir="auto">TCP provides full-duplex communication where data can flow in both directions simultaneously. Each TCP endpoint maintains both a sending buffer and receiving buffer, allowing segments to be transmitted in both directions concurrently.</p></div><div class="el-h3"><h3 data-heading="Connection-Oriented Service" dir="auto" class="heading" id="Connection-Oriented_Service_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>Connection-Oriented Service</h3></div><div class="el-p"><p dir="auto">TCP establishes a virtual connection before data exchange through a three-step process:</p></div><div class="el-ol"><ol>
<li data-line="0" dir="auto">TCP at process A informs TCP at process B and gets approval.</li>
<li data-line="1" dir="auto">Both TCPs exchange data in both directions.</li>
<li data-line="2" dir="auto">After data exchange is complete and buffers are empty, both TCPs destroy their buffers.</li>
</ol></div><div class="el-p"><p dir="auto">The connection is virtual rather than physical - TCP segments can be sent out of order, lost, or corrupted, and may take different paths to reach the destination.</p></div><div class="el-h3"><h3 data-heading="Reliable Service" dir="auto" class="heading" id="Reliable_Service_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>Reliable Service</h3></div><div class="el-p"><p dir="auto">TCP ensures reliability through an acknowledgment mechanism that verifies safe data arrival. It uses sequence numbers, acknowledgments, checksums, timers, and retransmission to ensure correct and in-order delivery.</p></div><div class="el-h2"><h2 data-heading="Numbering System" dir="auto" class="heading" id="Numbering_System_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>Numbering System</h2></div><div class="el-p"><p dir="auto">TCP employs a sophisticated numbering system for tracking data:</p></div><div class="el-p"><p dir="auto"><strong>Byte Numbering:</strong></p></div><div class="el-ul"><ul class="has-list-bullet">
<li data-line="0" dir="auto"><span class="list-bullet"></span>TCP numbers all data bytes transmitted in a connection.</li>
<li data-line="1" dir="auto"><span class="list-bullet"></span>Numbering is independent in each direction.</li>
<li data-line="2" dir="auto"><span class="list-bullet"></span>The starting number is randomly chosen between 0 and 2³²-1, not necessarily starting from 0.</li>
<li data-line="3" dir="auto"><span class="list-bullet"></span>For example, if the random number is 1,057 and 6,000 bytes are to be sent, bytes are numbered from 1,057 to 7,056.</li>
</ul></div><div class="el-p"><p dir="auto"><strong>Sequence Numbers:</strong></p></div><div class="el-ul"><ul class="has-list-bullet">
<li data-line="0" dir="auto"><span class="list-bullet"></span>After bytes are numbered, TCP assigns a sequence number to each segment.</li>
<li data-line="1" dir="auto"><span class="list-bullet"></span>The sequence number for each segment represents the number of the first byte carried in that segment.</li>
<li data-line="2" dir="auto"><span class="list-bullet"></span>These sequence numbers enable the receiver to detect lost packets, reorder out-of-sequence segments, and eliminate duplicates.</li>
</ul></div><div class="el-p"><p dir="auto">This comprehensive system allows TCP to provide reliable, ordered data delivery despite operating over an unreliable network layer, making it suitable for applications requiring guaranteed data integrity.</p></div><div class="el-p"><p dir="auto"><strong>TCP (Transmission Control Protocol)</strong></p></div><div class="el-p"><p dir="auto">TCP is a connection-oriented protocol that provides reliable, ordered data transmission between devices. The concepts you've outlined accurately describe TCP's fundamental mechanisms for managing communication sessions.</p></div><div class="el-h2"><h2 data-heading="TCP Full-Duplex Communication" dir="auto" class="heading" id="TCP_Full-Duplex_Communication_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>TCP Full-Duplex Communication</h2></div><div class="el-p"><p dir="auto">TCP supports full-duplex communication, meaning both parties can send and receive data simultaneously. This bidirectional capability is enabled by TCP maintaining two separate buffers - one for sending and one for receiving - with independent control over each data stream. Unlike half-duplex communication where sending and receiving happen alternately, full-duplex enables concurrent transmission and reception, similar to a telephone conversation where both parties can speak and listen at the same time.</p></div><div class="el-h2"><h2 data-heading="Sequence and Acknowledgment Numbers" dir="auto" class="heading" id="Sequence_and_Acknowledgment_Numbers_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>Sequence and Acknowledgment Numbers</h2></div><div class="el-p"><p dir="auto">Each TCP connection uses separate sequence numbering for each direction of communication. The sequence number indicates how much data has been sent during the TCP session, while the acknowledgment number is sent by the receiver to indicate it has received cumulative data and is ready for the next segment.</p></div><div class="el-h3"><h3 data-heading="Cumulative Acknowledgments" dir="auto" class="heading" id="Cumulative_Acknowledgments_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>Cumulative Acknowledgments</h3></div><div class="el-p"><p dir="auto">TCP acknowledgments are cumulative. When a receiver sends an acknowledgment number, it confirms receipt of all bytes up to that point in sequence. For example, if the acknowledgment number is 5643, it means the receiver has successfully received all bytes from the beginning up to byte 5642.</p></div><div class="el-p"><p dir="auto"><strong>Calculation Example:</strong></p></div><div class="el-ul"><ul class="has-list-bullet">
<li data-line="0" dir="auto"><span class="list-bullet"></span>Client sends segment with seq=1, length=669 bytes</li>
<li data-line="1" dir="auto"><span class="list-bullet"></span>Server responds with ack=670 (1 + 669 = 670)</li>
<li data-line="2" dir="auto"><span class="list-bullet"></span>Client sends next segment with seq=670, length=1460 bytes</li>
<li data-line="3" dir="auto"><span class="list-bullet"></span>Server responds with ack=2130 (670 + 1460 = 2130)</li>
</ul></div><div class="el-p"><p dir="auto">The acknowledgment number represents the next expected byte number, calculated as: ACK = previous sequence number + number of bytes received.</p></div><div class="el-h1"><h1 data-heading="TCP Segment Structure and Header Fields" dir="auto" class="heading" id="TCP_Segment_Structure_and_Header_Fields_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>TCP Segment Structure and Header Fields</h1></div><div class="el-p"><p dir="auto">The TCP segment is the fundamental unit of data transfer in TCP communication. Understanding its structure is crucial for comprehending how TCP achieves reliable data transmission.</p></div><div class="el-p"><p dir="auto"><span alt="TCPHeader.png" src="cn/img/tcpheader.png" class="internal-embed media-embed image-embed is-loaded" target="_self"><img alt="TCPHeader.png" src="cn/img/tcpheader.png" target="_self"></span></p></div><div class="el-h2"><h2 data-heading="TCP Segment Composition" dir="auto" class="heading" id="TCP_Segment_Composition_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>TCP Segment Composition</h2></div><div class="el-p"><p dir="auto">A TCP segment consists of two main parts:</p></div><div class="el-ul"><ul class="has-list-bullet">
<li data-line="0" dir="auto"><span class="list-bullet"></span><strong>Header:</strong> 20-60 bytes containing control information.</li>
<li data-line="1" dir="auto"><span class="list-bullet"></span><strong>Data:</strong> Application layer data (payload).</li>
</ul></div><div class="el-h2"><h2 data-heading="Header Size Variations" dir="auto" class="heading" id="Header_Size_Variations_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>Header Size Variations</h2></div><div class="el-ul"><ul class="has-list-bullet">
<li data-line="0" dir="auto"><span class="list-bullet"></span><strong>Minimum size:</strong> 20 bytes (when no options are present).</li>
<li data-line="1" dir="auto"><span class="list-bullet"></span><strong>Maximum size:</strong> 60 bytes (when options field is fully utilized).</li>
<li data-line="2" dir="auto"><span class="list-bullet"></span><strong>Options field:</strong> Can add up to 40 bytes of additional information.</li>
</ul></div><div class="el-h2"><h2 data-heading="TCP Header Fields Breakdown" dir="auto" class="heading" id="TCP_Header_Fields_Breakdown_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>TCP Header Fields Breakdown</h2></div><div class="el-h3"><h3 data-heading="Port Information (32 bits total)" dir="auto" class="heading" id="Port_Information_(32_bits_total)_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>Port Information (32 bits total)</h3></div><div class="el-p"><p dir="auto"><strong>Source Port Address (16 bits)</strong></p></div><div class="el-ul"><ul class="has-list-bullet">
<li data-line="0" dir="auto"><span class="list-bullet"></span>Identifies the port number of the sending application.</li>
<li data-line="1" dir="auto"><span class="list-bullet"></span>Allows the receiving system to know which application sent the data.</li>
<li data-line="2" dir="auto"><span class="list-bullet"></span>Range: 0-65,535.</li>
</ul></div><div class="el-p"><p dir="auto"><strong>Destination Port Address (16 bits)</strong></p></div><div class="el-ul"><ul class="has-list-bullet">
<li data-line="0" dir="auto"><span class="list-bullet"></span>Specifies the port number of the receiving application.</li>
<li data-line="1" dir="auto"><span class="list-bullet"></span>Enables proper delivery to the correct application on the destination host.</li>
<li data-line="2" dir="auto"><span class="list-bullet"></span>Range: 0-65,535.</li>
</ul></div><div class="el-h3"><h3 data-heading="Sequence Management (64 bits total)" dir="auto" class="heading" id="Sequence_Management_(64_bits_total)_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>Sequence Management (64 bits total)</h3></div><div class="el-p"><p dir="auto"><strong>Sequence Number (32 bits)</strong></p></div><div class="el-ul"><ul class="has-list-bullet">
<li data-line="0" dir="auto"><span class="list-bullet"></span>Indicates the byte number assigned to the first byte of data in this segment.</li>
<li data-line="1" dir="auto"><span class="list-bullet"></span>Used for ordering segments and detecting lost packets.</li>
<li data-line="2" dir="auto"><span class="list-bullet"></span>Essential for TCP's reliable delivery mechanism.</li>
</ul></div><div class="el-p"><p dir="auto"><strong>Acknowledgment Number (32 bits)</strong></p></div><div class="el-ul"><ul class="has-list-bullet">
<li data-line="0" dir="auto"><span class="list-bullet"></span>Specifies the next byte number the sender expects to receive.</li>
<li data-line="1" dir="auto"><span class="list-bullet"></span>Follows the formula: If byte <em>x</em> was successfully received, acknowledgment = <em>x</em>+1.</li>
<li data-line="2" dir="auto"><span class="list-bullet"></span>Enables cumulative acknowledgment mechanism.</li>
</ul></div><div class="el-h3"><h3 data-heading="Header Control Information" dir="auto" class="heading" id="Header_Control_Information_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>Header Control Information</h3></div><div class="el-p"><p dir="auto"><strong>Header Length/Data Offset (4 bits)</strong></p></div><div class="el-ul"><ul class="has-list-bullet">
<li data-line="0" dir="auto"><span class="list-bullet"></span>Indicates the TCP header length in 32-bit words.</li>
<li data-line="1" dir="auto"><span class="list-bullet"></span><span class="list-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span><strong>Value range:</strong> 5 to 15.
<ul class="has-list-bullet">
<li data-line="2" dir="auto"><span class="list-bullet"></span>5 × 4 = 20 bytes (minimum header).</li>
<li data-line="3" dir="auto"><span class="list-bullet"></span>15 × 4 = 60 bytes (maximum header).</li>
</ul>
</li>
<li data-line="4" dir="auto"><span class="list-bullet"></span>Tells the receiver where the data portion begins.</li>
</ul></div><div class="el-p"><p dir="auto"><strong>Reserved Field (6 bits)</strong></p></div><div class="el-ul"><ul class="has-list-bullet">
<li data-line="0" dir="auto"><span class="list-bullet"></span>Currently unused bits set to zero.</li>
<li data-line="1" dir="auto"><span class="list-bullet"></span>Reserved for future protocol enhancements.</li>
<li data-line="2" dir="auto"><span class="list-bullet"></span>Must be ignored by current implementations.</li>
</ul></div><div class="el-h3"><h3 data-heading="Control Flags (6 bits)" dir="auto" class="heading" id="Control_Flags_(6_bits)_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>Control Flags (6 bits)</h3></div><div class="el-p"><p dir="auto">The control field contains six flags that manage TCP connection states and data handling:</p></div><div class="el-table" dir="ltr" style="overflow-x: auto;"><table>
<thead>
<tr>
<th dir="ltr">Flag</th>
<th dir="ltr">Purpose</th>
<th dir="ltr">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td dir="ltr"><strong>URG</strong></td>
<td dir="ltr">Urgent Data</td>
<td dir="ltr">Indicates the urgent pointer field contains valid data</td>
</tr>
<tr>
<td dir="ltr"><strong>ACK</strong></td>
<td dir="ltr">Acknowledgment</td>
<td dir="ltr">Confirms the acknowledgment number field is valid</td>
</tr>
<tr>
<td dir="ltr"><strong>PSH</strong></td>
<td dir="ltr">Push Function</td>
<td dir="ltr">Requests immediate data delivery to application</td>
</tr>
<tr>
<td dir="ltr"><strong>RST</strong></td>
<td dir="ltr">Reset Connection</td>
<td dir="ltr">Forces connection termination due to errors</td>
</tr>
<tr>
<td dir="ltr"><strong>SYN</strong></td>
<td dir="ltr">Synchronize</td>
<td dir="ltr">Used during connection establishment</td>
</tr>
<tr>
<td dir="ltr"><strong>FIN</strong></td>
<td dir="ltr">Finish Connection</td>
<td dir="ltr">Initiates graceful connection termination</td>
</tr>
</tbody>
</table></div><div class="el-p"><p dir="auto"><span alt="TCPHeaderFlags.png" src="cn/img/tcpheaderflags.png" class="internal-embed media-embed image-embed is-loaded" target="_self"><img alt="TCPHeaderFlags.png" src="cn/img/tcpheaderflags.png" target="_self"></span></p></div><div class="el-h3"><h3 data-heading="Flow Control and Error Detection" dir="auto" class="heading" id="Flow_Control_and_Error_Detection_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>Flow Control and Error Detection</h3></div><div class="el-p"><p dir="auto"><strong>Window Size (16 bits)</strong></p></div><div class="el-ul"><ul class="has-list-bullet">
<li data-line="0" dir="auto"><span class="list-bullet"></span>Specifies the number of bytes the receiver can accept.</li>
<li data-line="1" dir="auto"><span class="list-bullet"></span><strong>Maximum value:</strong> 65,535 bytes (unless extended by options).</li>
<li data-line="2" dir="auto"><span class="list-bullet"></span>Implements TCP's flow control mechanism.</li>
<li data-line="3" dir="auto"><span class="list-bullet"></span>Prevents sender from overwhelming the receiver.</li>
</ul></div><div class="el-p"><p dir="auto"><strong>Checksum (16 bits)</strong></p></div><div class="el-ul"><ul class="has-list-bullet">
<li data-line="0" dir="auto"><span class="list-bullet"></span>Contains error detection information for the entire segment.</li>
<li data-line="1" dir="auto"><span class="list-bullet"></span>Calculated using the same procedure as UDP.</li>
<li data-line="2" dir="auto"><span class="list-bullet"></span>Covers both header and data portions.</li>
<li data-line="3" dir="auto"><span class="list-bullet"></span>Ensures data integrity during transmission.</li>
</ul></div><div class="el-h3"><h3 data-heading="Special Data Handling" dir="auto" class="heading" id="Special_Data_Handling_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>Special Data Handling</h3></div><div class="el-p"><p dir="auto"><strong>Urgent Pointer (16 bits)</strong></p></div><div class="el-ul"><ul class="has-list-bullet">
<li data-line="0" dir="auto"><span class="list-bullet"></span>Valid only when URG flag is set.</li>
<li data-line="1" dir="auto"><span class="list-bullet"></span>Points to the last byte of urgent data in the segment.</li>
<li data-line="2" dir="auto"><span class="list-bullet"></span><strong>Calculation:</strong> Sequence Number + Urgent Pointer = Last urgent byte position.</li>
<li data-line="3" dir="auto"><span class="list-bullet"></span>Enables priority data transmission.</li>
</ul></div><div class="el-p"><p dir="auto"><strong>Options Field (0-40 bytes)</strong></p></div><div class="el-ul"><ul class="has-list-bullet">
<li data-line="0" dir="auto"><span class="list-bullet"></span>Provides extensibility for additional TCP features.</li>
<li data-line="1" dir="auto"><span class="list-bullet"></span><span class="list-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>Common options include:
<ul class="has-list-bullet">
<li data-line="2" dir="auto"><span class="list-bullet"></span>Maximum Segment Size (MSS).</li>
<li data-line="3" dir="auto"><span class="list-bullet"></span>Window scaling.</li>
<li data-line="4" dir="auto"><span class="list-bullet"></span>Timestamps.</li>
<li data-line="5" dir="auto"><span class="list-bullet"></span>Selective acknowledgments.</li>
</ul>
</li>
</ul></div><div class="el-h3"><h3 data-heading="Practical Applications" dir="auto" class="heading" id="Practical_Applications_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>Practical Applications</h3></div><div class="el-h4"><h4 data-heading="Connection Management" dir="auto" class="heading" id="Connection_Management_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>Connection Management</h4></div><div class="el-p"><p dir="auto">The control flags work together to manage TCP connections:</p></div><div class="el-ul"><ul class="has-list-bullet">
<li data-line="0" dir="auto"><span class="list-bullet"></span><strong>Connection establishment:</strong> Uses SYN flags.</li>
<li data-line="1" dir="auto"><span class="list-bullet"></span><strong>Data transfer:</strong> Uses ACK flags for acknowledgments.</li>
<li data-line="2" dir="auto"><span class="list-bullet"></span><strong>Connection termination:</strong> Uses FIN flags.</li>
</ul></div><div class="el-h4"><h4 data-heading="Data Reliability" dir="auto" class="heading" id="Data_Reliability_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>Data Reliability</h4></div><div class="el-p"><p dir="auto">Multiple fields ensure reliable transmission:</p></div><div class="el-ul"><ul class="has-list-bullet">
<li data-line="0" dir="auto"><span class="list-bullet"></span>Sequence numbers provide ordering.</li>
<li data-line="1" dir="auto"><span class="list-bullet"></span>Acknowledgment numbers confirm receipt.</li>
<li data-line="2" dir="auto"><span class="list-bullet"></span>Checksums detect corruption.</li>
<li data-line="3" dir="auto"><span class="list-bullet"></span>Window size prevents overflow.</li>
</ul></div><div class="el-h4"><h4 data-heading="Performance Optimization" dir="auto" class="heading" id="Performance_Optimization_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>Performance Optimization</h4></div><div class="el-p"><p dir="auto">Several fields enhance performance:</p></div><div class="el-ul"><ul class="has-list-bullet">
<li data-line="0" dir="auto"><span class="list-bullet"></span>Window size enables flow control.</li>
<li data-line="1" dir="auto"><span class="list-bullet"></span>Urgent pointer allows priority data.</li>
<li data-line="2" dir="auto"><span class="list-bullet"></span>Options field supports advanced features.</li>
</ul></div><div class="el-p"><p dir="auto">This comprehensive header structure enables TCP to provide reliable, ordered, and error-checked data transmission while maintaining efficient flow control and connection management capabilities.</p></div><div class="el-h1"><h1 data-heading="TCP Connection-Oriented Protocol" dir="auto" class="heading" id="TCP_Connection-Oriented_Protocol_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>TCP Connection-Oriented Protocol</h1></div><div class="el-p"><p dir="auto">TCP is a connection-oriented protocol that establishes a virtual path between source and destination. This virtual connection ensures reliable data delivery through sequence numbering, acknowledgments, and retransmission mechanisms. The full-duplex nature of TCP allows both parties to send data simultaneously in both directions.</p></div><div class="el-h2"><h2 data-heading="Three-Way Handshake Process" dir="auto" class="heading" id="Three-Way_Handshake_Process_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>Three-Way Handshake Process</h2></div><div class="el-p"><p dir="auto">The three-way handshake is fundamental to TCP connection establishment, involving three distinct steps that synchronize both communicating endpoints.</p></div><div class="el-p"><p dir="auto"><strong>Step 1: SYN (Synchronize)</strong><br>
The client initiates the connection by sending a SYN segment to the server. This segment contains:</p></div><div class="el-ul"><ul class="has-list-bullet">
<li data-line="0" dir="auto"><span class="list-bullet"></span>Source and destination port numbers</li>
<li data-line="1" dir="auto"><span class="list-bullet"></span>The client's Initial Sequence Number (ISN) - a randomly chosen 32-bit number</li>
<li data-line="2" dir="auto"><span class="list-bullet"></span>SYN flag set to 1, ACK flag set to 0</li>
<li data-line="3" dir="auto"><span class="list-bullet"></span>Window size and maximum segment size parameters</li>
</ul></div><div class="el-p"><p dir="auto"><strong>Step 2: SYN-ACK (Synchronize-Acknowledge)</strong><br>
The server responds with a segment serving dual purposes:</p></div><div class="el-ul"><ul class="has-list-bullet">
<li data-line="0" dir="auto"><span class="list-bullet"></span><strong>Acknowledgment</strong>: Uses the ACK flag set to 1 and acknowledgment number equal to client's ISN + 1</li>
<li data-line="1" dir="auto"><span class="list-bullet"></span><strong>Synchronization</strong>: Includes the server's own ISN for data flowing from server to client</li>
<li data-line="2" dir="auto"><span class="list-bullet"></span>The server advertises its window size and maximum segment size</li>
</ul></div><div class="el-p"><p dir="auto"><strong>Step 3: ACK (Acknowledge)</strong><br>
The client sends the final acknowledgment:</p></div><div class="el-ul"><ul class="has-list-bullet">
<li data-line="0" dir="auto"><span class="list-bullet"></span>ACK flag set to 1</li>
<li data-line="1" dir="auto"><span class="list-bullet"></span>Acknowledgment number equal to server's ISN + 1</li>
<li data-line="2" dir="auto"><span class="list-bullet"></span>Confirms the server's readiness and establishes the connection</li>
<li data-line="3" dir="auto"><span class="list-bullet"></span>Data transmission can begin with this segment</li>
</ul></div><div class="el-h2"><h2 data-heading="Why Four Steps Are Required" dir="auto" class="heading" id="Why_Four_Steps_Are_Required_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>Why Four Steps Are Required</h2></div><div class="el-p"><p dir="auto">TCP uses a four-way handshake for termination because it's actually <strong>two pairs of two-way handshakes</strong>. Since TCP is full-duplex, each direction of the connection must be closed independently. When one side sends a FIN, it only closes communication in one direction - the sender can no longer transmit data but can still receive data from the other side.</p></div><div class="el-h2"><h2 data-heading="Four-Way Handshake Process" dir="auto" class="heading" id="Four-Way_Handshake_Process_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>Four-Way Handshake Process</h2></div><div class="el-p"><p dir="auto"><strong>Step 1: Initial FIN</strong><br>
The initiating party (client or server) sends a FIN segment to signal it has no more data to send.</p></div><div class="el-p"><p dir="auto"><strong>Step 2: ACK Response</strong><br>
The receiving party acknowledges the FIN with an ACK segment. The acknowledgment number equals the sequence number from the FIN plus 1.</p></div><div class="el-p"><p dir="auto"><strong>Step 3: Second FIN</strong><br>
The receiving party sends its own FIN segment when it has finished sending data in its direction.</p></div><div class="el-p"><p dir="auto"><strong>Step 4: Final ACK</strong><br>
The original initiator acknowledges the second FIN with an ACK segment, completing the termination.</p></div><div class="el-h2"><h2 data-heading="Half-Closed Connection State" dir="auto" class="heading" id="Half-Closed_Connection_State_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>Half-Closed Connection State</h2></div><div class="el-p"><p dir="auto">Between steps 2 and 3, the connection exists in a <strong>half-closed state</strong>. During this period:</p></div><div class="el-ul"><ul class="has-list-bullet">
<li data-line="0" dir="auto"><span class="list-bullet"></span>The initial sender cannot transmit new data but can receive.</li>
<li data-line="1" dir="auto"><span class="list-bullet"></span>The other party can continue sending data until ready to close its side.</li>
<li data-line="2" dir="auto"><span class="list-bullet"></span>This allows for complete data transmission before full closure.</li>
</ul></div><div class="el-h2"><h2 data-heading="TCP Reset (RST) - Abrupt Termination" dir="auto" class="heading" id="TCP_Reset_(RST)_-_Abrupt_Termination_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>TCP Reset (RST) - Abrupt Termination</h2></div><div class="el-p"><p dir="auto">TCP also supports immediate connection termination using RST (reset) segments, which differs from the graceful four-way handshake. RST segments are sent in specific scenarios:</p></div><div class="el-p"><p dir="auto"><strong>When RST is Used:</strong></p></div><div class="el-ul"><ul class="has-list-bullet">
<li data-line="0" dir="auto"><span class="list-bullet"></span>Connection request to a non-existent port.</li>
<li data-line="1" dir="auto"><span class="list-bullet"></span>Abnormal connection conditions requiring immediate termination.</li>
<li data-line="2" dir="auto"><span class="list-bullet"></span>Detection of idle connections that need cleanup.</li>
<li data-line="3" dir="auto"><span class="list-bullet"></span>Security threats detected by firewalls.</li>
<li data-line="4" dir="auto"><span class="list-bullet"></span>Protocol violations or unexpected packets.</li>
</ul></div><div class="el-p"><p dir="auto"><strong>RST Behavior:</strong><br>
A TCP reset immediately terminates the connection. Unlike the graceful FIN process, RST causes both endpoints to immediately close the connection and discard any undelivered data.</p></div><div class="el-h2"><h2 data-heading="Graceful vs Abrupt Termination" dir="auto" class="heading" id="Graceful_vs_Abrupt_Termination_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>Graceful vs Abrupt Termination</h2></div><div class="el-p"><p dir="auto">The four-way handshake ensures <strong>graceful termination</strong> where all data is properly delivered and acknowledged before closure. This prevents data loss and allows applications to complete their operations cleanly.</p></div><div class="el-p"><p dir="auto">In contrast, RST provides <strong>abrupt termination</strong> for error conditions or security situations where immediate closure is necessary, even if it means losing data in transit.</p></div><div class="el-p"><p dir="auto">The four-way process reflects TCP's commitment to reliable communication, ensuring that both parties can complete their data transmission obligations before the connection fully terminates.</p></div><div class="footer"><div class="data-bar"></div></div></div></div></div><div id="right-content" class="leaf" style="--sidebar-width: var(--sidebar-width-right);"><div id="right-sidebar" class="sidebar"><div class="sidebar-handle"></div><div class="sidebar-topbar"><div class="topbar-content"><label class="theme-toggle-container" for="theme-toggle-input" id=""><input class="theme-toggle-input" type="checkbox" id="theme-toggle-input"><div class="toggle-background"></div></label></div><div class="clickable-icon sidebar-collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="100%" height="100%" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3" stroke-linecap="round" stroke-linejoin="round" class="svg-icon"><path d="M21 3H3C1.89543 3 1 3.89543 1 5V19C1 20.1046 1.89543 21 3 21H21C22.1046 21 23 20.1046 23 19V5C23 3.89543 22.1046 3 21 3Z"></path><path d="M10 4V20"></path><path d="M4 7H7"></path><path d="M4 10H7"></path><path d="M4 13H7"></path></svg></div></div><div class="sidebar-content-wrapper"><div id="right-sidebar-content" class="leaf-content"><div class="graph-view-wrapper"><div class="feature-header"><div class="feature-title">Interactive Graph</div></div><div class="graph-view-placeholder">
		<div class="graph-view-container">
			<div class="graph-icon graph-expand" role="button" aria-label="Expand" data-tooltip-position="top"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon"><line x1="7" y1="17" x2="17" y2="7"></line><polyline points="7 7 17 7 17 17"></polyline></svg></div>
			<div class="graph-icon graph-global" role="button" aria-label="Global Graph" data-tooltip-position="top"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-git-fork"><circle cx="12" cy="18" r="3"></circle><circle cx="6" cy="6" r="3"></circle><circle cx="18" cy="6" r="3"></circle><path d="M18 9v2c0 .6-.4 1-1 1H7c-.6 0-1-.4-1-1V9"></path><path d="M12 12v3"></path></svg></div>
			<canvas id="graph-canvas" class="hide" width="512px" height="512px"></canvas>
		</div>
		</div></div><div id="outline" class=" tree-container"><div class="feature-header"><div class="feature-title">Table Of Contents</div><button class="clickable-icon nav-action-button tree-collapse-all" aria-label="Collapse All"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></svg></button></div><div class="tree-item" data-depth="1"><a class="tree-item-self is-clickable" href="cn/tcp.html#TCP_0" data-path="#TCP_0"><div class="tree-item-inner heading-link" heading-name="TCP">TCP</div></a><div class="tree-item-children"></div></div><div class="tree-item mod-collapsible" data-depth="1"><a class="tree-item-self is-clickable mod-collapsible" href="cn/tcp.html#TCP_(_Transmission_Control_Protocol_)_0" data-path="#TCP_(_Transmission_Control_Protocol_)_0"><div class="tree-item-icon collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div><div class="tree-item-inner heading-link" heading-name="TCP ( Transmission Control Protocol )">TCP ( Transmission Control Protocol )</div></a><div class="tree-item-children"><div class="tree-item mod-collapsible" data-depth="2"><a class="tree-item-self is-clickable mod-collapsible" href="cn/tcp.html#TCP_Buffers_0" data-path="#TCP_Buffers_0"><div class="tree-item-icon collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div><div class="tree-item-inner heading-link" heading-name="TCP Buffers">TCP Buffers</div></a><div class="tree-item-children"><div class="tree-item" data-depth="3"><a class="tree-item-self is-clickable" href="cn/tcp.html#Sender_Side_Buffer_0" data-path="#Sender_Side_Buffer_0"><div class="tree-item-inner heading-link" heading-name="Sender Side Buffer:">Sender Side Buffer:</div></a><div class="tree-item-children"></div></div><div class="tree-item" data-depth="3"><a class="tree-item-self is-clickable" href="cn/tcp.html#Receiver_Side_Buffer_0" data-path="#Receiver_Side_Buffer_0"><div class="tree-item-inner heading-link" heading-name="Receiver Side Buffer:">Receiver Side Buffer:</div></a><div class="tree-item-children"></div></div></div></div><div class="tree-item mod-collapsible" data-depth="2"><a class="tree-item-self is-clickable mod-collapsible" href="cn/tcp.html#TCP_Segmentation_and_Services_0" data-path="#TCP_Segmentation_and_Services_0"><div class="tree-item-icon collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div><div class="tree-item-inner heading-link" heading-name="TCP Segmentation and Services">TCP Segmentation and Services</div></a><div class="tree-item-children"><div class="tree-item" data-depth="3"><a class="tree-item-self is-clickable" href="cn/tcp.html#Bytes_and_Segments_0" data-path="#Bytes_and_Segments_0"><div class="tree-item-inner heading-link" heading-name="Bytes and Segments">Bytes and Segments</div></a><div class="tree-item-children"></div></div><div class="tree-item" data-depth="3"><a class="tree-item-self is-clickable" href="cn/tcp.html#Buffering_and_Flow_Control_0" data-path="#Buffering_and_Flow_Control_0"><div class="tree-item-inner heading-link" heading-name="Buffering and Flow Control">Buffering and Flow Control</div></a><div class="tree-item-children"></div></div></div></div><div class="tree-item mod-collapsible" data-depth="2"><a class="tree-item-self is-clickable mod-collapsible" href="cn/tcp.html#Full-Duplex_Service_0" data-path="#Full-Duplex_Service_0"><div class="tree-item-icon collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div><div class="tree-item-inner heading-link" heading-name="Full-Duplex Service">Full-Duplex Service</div></a><div class="tree-item-children"><div class="tree-item" data-depth="3"><a class="tree-item-self is-clickable" href="cn/tcp.html#Connection-Oriented_Service_0" data-path="#Connection-Oriented_Service_0"><div class="tree-item-inner heading-link" heading-name="Connection-Oriented Service">Connection-Oriented Service</div></a><div class="tree-item-children"></div></div><div class="tree-item" data-depth="3"><a class="tree-item-self is-clickable" href="cn/tcp.html#Reliable_Service_0" data-path="#Reliable_Service_0"><div class="tree-item-inner heading-link" heading-name="Reliable Service">Reliable Service</div></a><div class="tree-item-children"></div></div></div></div><div class="tree-item" data-depth="2"><a class="tree-item-self is-clickable" href="cn/tcp.html#Numbering_System_0" data-path="#Numbering_System_0"><div class="tree-item-inner heading-link" heading-name="Numbering System">Numbering System</div></a><div class="tree-item-children"></div></div><div class="tree-item" data-depth="2"><a class="tree-item-self is-clickable" href="cn/tcp.html#TCP_Full-Duplex_Communication_0" data-path="#TCP_Full-Duplex_Communication_0"><div class="tree-item-inner heading-link" heading-name="TCP Full-Duplex Communication">TCP Full-Duplex Communication</div></a><div class="tree-item-children"></div></div><div class="tree-item mod-collapsible" data-depth="2"><a class="tree-item-self is-clickable mod-collapsible" href="cn/tcp.html#Sequence_and_Acknowledgment_Numbers_0" data-path="#Sequence_and_Acknowledgment_Numbers_0"><div class="tree-item-icon collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div><div class="tree-item-inner heading-link" heading-name="Sequence and Acknowledgment Numbers">Sequence and Acknowledgment Numbers</div></a><div class="tree-item-children"><div class="tree-item" data-depth="3"><a class="tree-item-self is-clickable" href="cn/tcp.html#Cumulative_Acknowledgments_0" data-path="#Cumulative_Acknowledgments_0"><div class="tree-item-inner heading-link" heading-name="Cumulative Acknowledgments">Cumulative Acknowledgments</div></a><div class="tree-item-children"></div></div></div></div></div></div><div class="tree-item mod-collapsible" data-depth="1"><a class="tree-item-self is-clickable mod-collapsible" href="cn/tcp.html#TCP_Segment_Structure_and_Header_Fields_0" data-path="#TCP_Segment_Structure_and_Header_Fields_0"><div class="tree-item-icon collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div><div class="tree-item-inner heading-link" heading-name="TCP Segment Structure and Header Fields">TCP Segment Structure and Header Fields</div></a><div class="tree-item-children"><div class="tree-item" data-depth="2"><a class="tree-item-self is-clickable" href="cn/tcp.html#TCP_Segment_Composition_0" data-path="#TCP_Segment_Composition_0"><div class="tree-item-inner heading-link" heading-name="TCP Segment Composition">TCP Segment Composition</div></a><div class="tree-item-children"></div></div><div class="tree-item" data-depth="2"><a class="tree-item-self is-clickable" href="cn/tcp.html#Header_Size_Variations_0" data-path="#Header_Size_Variations_0"><div class="tree-item-inner heading-link" heading-name="Header Size Variations">Header Size Variations</div></a><div class="tree-item-children"></div></div><div class="tree-item mod-collapsible" data-depth="2"><a class="tree-item-self is-clickable mod-collapsible" href="cn/tcp.html#TCP_Header_Fields_Breakdown_0" data-path="#TCP_Header_Fields_Breakdown_0"><div class="tree-item-icon collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div><div class="tree-item-inner heading-link" heading-name="TCP Header Fields Breakdown">TCP Header Fields Breakdown</div></a><div class="tree-item-children"><div class="tree-item" data-depth="3"><a class="tree-item-self is-clickable" href="cn/tcp.html#Port_Information_(32_bits_total)_0" data-path="#Port_Information_(32_bits_total)_0"><div class="tree-item-inner heading-link" heading-name="Port Information (32 bits total)">Port Information (32 bits total)</div></a><div class="tree-item-children"></div></div><div class="tree-item" data-depth="3"><a class="tree-item-self is-clickable" href="cn/tcp.html#Sequence_Management_(64_bits_total)_0" data-path="#Sequence_Management_(64_bits_total)_0"><div class="tree-item-inner heading-link" heading-name="Sequence Management (64 bits total)">Sequence Management (64 bits total)</div></a><div class="tree-item-children"></div></div><div class="tree-item" data-depth="3"><a class="tree-item-self is-clickable" href="cn/tcp.html#Header_Control_Information_0" data-path="#Header_Control_Information_0"><div class="tree-item-inner heading-link" heading-name="Header Control Information">Header Control Information</div></a><div class="tree-item-children"></div></div><div class="tree-item" data-depth="3"><a class="tree-item-self is-clickable" href="cn/tcp.html#Control_Flags_(6_bits)_0" data-path="#Control_Flags_(6_bits)_0"><div class="tree-item-inner heading-link" heading-name="Control Flags (6 bits)">Control Flags (6 bits)</div></a><div class="tree-item-children"></div></div><div class="tree-item" data-depth="3"><a class="tree-item-self is-clickable" href="cn/tcp.html#Flow_Control_and_Error_Detection_0" data-path="#Flow_Control_and_Error_Detection_0"><div class="tree-item-inner heading-link" heading-name="Flow Control and Error Detection">Flow Control and Error Detection</div></a><div class="tree-item-children"></div></div><div class="tree-item" data-depth="3"><a class="tree-item-self is-clickable" href="cn/tcp.html#Special_Data_Handling_0" data-path="#Special_Data_Handling_0"><div class="tree-item-inner heading-link" heading-name="Special Data Handling">Special Data Handling</div></a><div class="tree-item-children"></div></div><div class="tree-item mod-collapsible" data-depth="3"><a class="tree-item-self is-clickable mod-collapsible" href="cn/tcp.html#Practical_Applications_0" data-path="#Practical_Applications_0"><div class="tree-item-icon collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div><div class="tree-item-inner heading-link" heading-name="Practical Applications">Practical Applications</div></a><div class="tree-item-children"><div class="tree-item" data-depth="4"><a class="tree-item-self is-clickable" href="cn/tcp.html#Connection_Management_0" data-path="#Connection_Management_0"><div class="tree-item-inner heading-link" heading-name="Connection Management">Connection Management</div></a><div class="tree-item-children"></div></div><div class="tree-item" data-depth="4"><a class="tree-item-self is-clickable" href="cn/tcp.html#Data_Reliability_0" data-path="#Data_Reliability_0"><div class="tree-item-inner heading-link" heading-name="Data Reliability">Data Reliability</div></a><div class="tree-item-children"></div></div><div class="tree-item" data-depth="4"><a class="tree-item-self is-clickable" href="cn/tcp.html#Performance_Optimization_0" data-path="#Performance_Optimization_0"><div class="tree-item-inner heading-link" heading-name="Performance Optimization">Performance Optimization</div></a><div class="tree-item-children"></div></div></div></div></div></div></div></div><div class="tree-item mod-collapsible" data-depth="1"><a class="tree-item-self is-clickable mod-collapsible" href="cn/tcp.html#TCP_Connection-Oriented_Protocol_0" data-path="#TCP_Connection-Oriented_Protocol_0"><div class="tree-item-icon collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div><div class="tree-item-inner heading-link" heading-name="TCP Connection-Oriented Protocol">TCP Connection-Oriented Protocol</div></a><div class="tree-item-children"><div class="tree-item" data-depth="2"><a class="tree-item-self is-clickable" href="cn/tcp.html#Three-Way_Handshake_Process_0" data-path="#Three-Way_Handshake_Process_0"><div class="tree-item-inner heading-link" heading-name="Three-Way Handshake Process">Three-Way Handshake Process</div></a><div class="tree-item-children"></div></div><div class="tree-item" data-depth="2"><a class="tree-item-self is-clickable" href="cn/tcp.html#Why_Four_Steps_Are_Required_0" data-path="#Why_Four_Steps_Are_Required_0"><div class="tree-item-inner heading-link" heading-name="Why Four Steps Are Required">Why Four Steps Are Required</div></a><div class="tree-item-children"></div></div><div class="tree-item" data-depth="2"><a class="tree-item-self is-clickable" href="cn/tcp.html#Four-Way_Handshake_Process_0" data-path="#Four-Way_Handshake_Process_0"><div class="tree-item-inner heading-link" heading-name="Four-Way Handshake Process">Four-Way Handshake Process</div></a><div class="tree-item-children"></div></div><div class="tree-item" data-depth="2"><a class="tree-item-self is-clickable" href="cn/tcp.html#Half-Closed_Connection_State_0" data-path="#Half-Closed_Connection_State_0"><div class="tree-item-inner heading-link" heading-name="Half-Closed Connection State">Half-Closed Connection State</div></a><div class="tree-item-children"></div></div><div class="tree-item" data-depth="2"><a class="tree-item-self is-clickable" href="cn/tcp.html#TCP_Reset_(RST)_-_Abrupt_Termination_0" data-path="#TCP_Reset_(RST)_-_Abrupt_Termination_0"><div class="tree-item-inner heading-link" heading-name="TCP Reset (RST) - Abrupt Termination">TCP Reset (RST) - Abrupt Termination</div></a><div class="tree-item-children"></div></div><div class="tree-item" data-depth="2"><a class="tree-item-self is-clickable" href="cn/tcp.html#Graceful_vs_Abrupt_Termination_0" data-path="#Graceful_vs_Abrupt_Termination_0"><div class="tree-item-inner heading-link" heading-name="Graceful vs Abrupt Termination">Graceful vs Abrupt Termination</div></a><div class="tree-item-children"></div></div></div></div></div></div></div><script defer="">let rs = document.querySelector("#right-sidebar"); rs.classList.toggle("is-collapsed", window.innerWidth < 768); rs.style.setProperty("--sidebar-width", localStorage.getItem("sidebar-right-width"));</script></div></div></div></div></body></html>